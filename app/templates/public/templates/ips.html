{% extends "public/layout.html" %}

{% block head %}

<link rel="stylesheet" href="{{url_for('static',filename='css/dataTable.css')}}">

{% endblock %}
   
{% block body %}
    <!-- Load img with "loading" -->

    <div class="div-top">
        <div id="card" class="card" style="width: 1444px; margin: 0 auto; visibility: hidden">
            <h1 style="text-align: center; color: rgb(48, 9, 119)">Consulta dos IPS</h1>
            <hr>
            <table id="ipTable" class="table table-striped" style="margin: auto;">
                <thead>
                    <tr>
                        <th>Hostname</th>
                        <th>Tombamento</th>
                        <th>Ur</th>
                        <th>Ip</th>
                        <th>Local</th>
                        <th>Setor</th>
                        <th>Ramal</th>
                        <th>Registrado</th>
                        <th>Atualizado</th>
                        <th>Editar</th>
                    </tr>
                </thead>
                <tbody>
                    {% for machine in machines %}
                    <tr>
                        <td>{{machine.hostname}}</td>
                        <td>{{machine.tipping}}</td>
                        <td>{{machine.ur}}</td>
                        <td>{{machine.ip}}</td>
                        <td>{{machine.local}}</td>
                        <td>{{machine.sector}}</td>
                        <td>{{machine.ramal}}</td>
                        <td>{{machine.created_at}}</td>
                        <td>{{machine.updated_at}}</td>
                        <td><button class="btn btn-sl btn-outline-info btn-block" type="submit">Editar</button></td>
                    </tr>
                    {% endfor %}
            </table>
        </div>
    </div>
{% endblock %}
{% block scripts %}
<script src="{{url_for('static',filename='js/jquery-datatable.js')}}" charset="utf-8"></script>
<script>
</script>
<script>
    setTimeout(function(){
        document.getElementById('card').style.visibility = 'visible'
        $(document).ready( function () {
            $('#ipTable').DataTable({
                                    "language" : {
                                                    "sProcessing":   "A processar...",
                                                    "sLengthMenu":   "Mostrar _MENU_ registos",
                                                    "sZeroRecords":  "Não foram encontrados resultados",
                                                    "sInfo":         "Resultado(s) _START_ a _END_ de um total de _TOTAL_.",
                                                    "sInfoEmpty":    "Mostrando de 0 até 0 de 0 registos",
                                                    "sInfoFiltered": "(filtrado de _MAX_ registos no total)",
                                                    "sInfoPostFix":  "",
                                                    "sSearch":       "Procurar:",
                                                    "sUrl":          "",
                                                    "oPaginate": {
                                                        "sFirst":    "Primeiro",
                                                        "sPrevious": "Anterior",
                                                        "sNext":     "Seguinte",
                                                        "sLast":     "Último"
                                                    }
                                                },
                                        responsive: true,
                                    // Retirada da visualização da quantidade dos itens por página.
                                    "bLengthChange": false,
                                    // Define o tamanho de registros a serem filtrados, o primeiro é o default.
                                    "lengthMenu": [5, 10, 25, 50, 75, 100 ]
                                })
        })
    },0)

    $('body').append("<div id='loading'><img id='loading-image' src='{{url_for('static',filename='img/ajax-loader.gif')}}' alt='Loading...'' /></div>");
    $(window).on('load',function() {
        setTimeout(removeLoader, 500);
    });

    function removeLoader(){
        $("#loading").fadeOut(200, function() {
          $("#loading").remove(); 
      });  
    }
    
</script>
{% endblock %}
